## –ò–∑–æ–ª—è—Ü–∏—è –¥–≤–∏–∂–∫–æ–≤ (Engine Isolation) üîí

–¶–µ–ª—å: –∫–∞–∂–¥—ã–π –¥–≤–∏–∂–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º ‚Äî **—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ—ë–º internal buffer** –∏ –Ω–µ –≤–ª–∏—è—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –¥–≤–∏–∂–∫–∏ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö–æ–ª—Å—Ç—ã.

–ö—Ä–∞—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (—á—ë—Ç–∫–æ –∏ –ø–æ —Ñ–∞–∫—Ç—É):

- API –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–≤–∏–∂–∫–∞:
  - `init(opts)` ‚Äî —Å–æ–∑–¥–∞—Ç—å/–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å internal buffer (opts.width, opts.height).
  - `execute(letter, x, y, color, opts)` ‚Äî —Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ internal buffer.
  - `compose(targetLayer)` ‚Äî –∫–æ–º–ø–æ–∑–∏—Ç–∏—Ç—å internal buffer –Ω–∞ –≤–Ω–µ—à–Ω–∏–π `targetLayer`.
  - `dispose()` ‚Äî –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã.
- –ó–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è:
  - —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å `window.artLayer` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–∞–Ω–≤—ã;
  - –º–µ–Ω—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ —Ä–µ–∂–∏–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `globalCompositeOperation`) –≤–Ω–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞;
  - –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ mutable –≥–ª–æ–±–∞–ª—å–Ω—ã–µ helper-–º–æ–¥—É–ª–∏ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞.
- –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –¥–≤–∏–∂–∫–æ–≤: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `engine.<style>.js` (–Ω–∞–ø—Ä–∏–º–µ—Ä `engine.liquid-ink.js`) ‚Äî loader —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.

–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–≤–∏–∂–∫–∞:
1. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ `engines/<style>/engine.<style>.js`.
2. –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ).
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å grep-–ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –≥–ª–æ–±–∞–ª–∏:
   - `grep -nR "window.artLayer" engines || true`
4. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Ñ–∞–π–ª –¥–≤–∏–∂–∫–∞ –∏/–∏–ª–∏ —Ç–µ—Å—Ç—ã, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- `diffusion.js` —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–ª–∏—Ç—Ä–æ–π –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –∏–Ω–∫–∏–Ω–≥–∞ (`executeInking`) ‚Äî **–Ω–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ** –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–µ–Ω–¥–µ—Ä–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ `diffusion.js`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ –∂—ë—Å—Ç–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∑–∞–ø—É—Å–∫ –¥–≤–∏–∂–∫–æ–≤ –≤ WebWorker/iframe.

–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª ‚Äî —ç—Ç–æ –∑–∞—â–∏—Ç–∏—Ç –≤–∞—à —Å—Ç–µ–∫ –æ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–ª–∏—è–Ω–∏–π –º–µ–∂–¥—É –¥–≤–∏–∂–∫–∞–º–∏. ‚úÖ